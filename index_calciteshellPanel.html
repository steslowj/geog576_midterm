<html>

<html>
  <head>
    <!-- working version following calcite tutorial shell panel with action bar and panels-->
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="description" content="UW-Madison Geog 576 Midterm Project" />
    <meta name="author" content="Jessica Steslow" />
    
    <title>Dragon Map</title>
    <link rel="icon" type="image/x-icon" href="dragon.png" />

    <script src="https://js.arcgis.com/calcite-components/1.9.2/calcite.esm.js" type="module"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/calcite-components/1.9.2/calcite.css" />

    <script src="https://js.arcgis.com/4.27/"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/4.27/esri/themes/dark/main.css" />
  </head>

<body>
    <calcite-shell class="calcite-mode-dark">
        <calcite-shell-panel slot="panel-start" position="start" id="shell-panel-start" widthScale="l" displayMode="overlay">
            <calcite-action-bar slot="action-bar">
                <calcite-action-group>
                    <calcite-action text="Layers" icon="layers"></calcite-action>
                    <calcite-action text="Legend" icon="legend"></calcite-action>
                    <calcite-action text="Search by Attributes" icon="search"></calcite-action>
                    <calcite-action text="Search by Name" icon="save"></calcite-action>
                    <calcite-action text="Add a Dragon" icon="plus"></calcite-action>
                </calcite-action-group>
                <calcite-action-group slot="bottom-actions">
                    <calcite-action text="How To" icon="question"></calcite-action>
                    <calcite-action text="Credits" icon="users"></calcite-action>
                </calcite-action-group>
            </calcite-action-bar>
            <calcite-panel heading="Layers" id="panel-start" closable>
                <calcite-block collapsible heading="Toggle Layers" description="Choose layers and change transparency">
                    <calcite-icon scale="s" slot="icon" icon="map-pin"></calcite-icon>
                    <calcite-block open>
                      <div>The viewers are going to love this</div>
                    </calcite-block>
                </calcite-block>
            </calcite-panel>
        </calcite-shell-panel>
        <calcite-panel heading="Dragon Map"></calcite-panel>
    </calcite-shell>
</body>

<script>
    const panel = document.getElementById("panel-start");
    const shellPanel = document.getElementById("shell-panel-start");
    const actions = shellPanel?.querySelectorAll("calcite-action");

    panel?.addEventListener("calcitePanelClose", function(event) {
        actions?.forEach(action => (action.active = false));
        shellPanel.collapsed = true;
    });

    actions?.forEach(el => {
        el.addEventListener("click", function(event) {
            actions?.forEach(action => (action.active = false));
            el.active = panel.closed;
            shellPanel.collapsed = !shellPanel.collapsed;
            panel.closed = !panel.closed;
            panel.heading = event.target.text;
        });
    });
</script>

</html>